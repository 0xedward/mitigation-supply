<!DOCTYPE html>


<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Web Mitigation Metrics</title>

  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com/" crossorigin>
  <link href="/style.css" rel="stylesheet" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;800&family=Roboto+Slab:wght@100;500&display=swap" rel="stylesheet" crossorigin="anonymous">
</head>
<body>
  <h1>Web Mitigation Metrics</h1>
  <article>
    <h2 id="csp">
      <a href="#csp">§</a>
      Content Security Policy
    </h2>
    <p>
      We believe that a carefully-crafted
      <a href="https://w3c.github.io/webappsec-csp/">Content Security Policy</a>
      can help protect web applications from injection attacks that would otherwise lead to script
      execution. <a href="https://csp.withgoogle.com/docs/strict-csp.html">Strict CSP</a> is a
      reasonable approach, one which we'd like to encourage.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use CSP at all, that define a
      <a href="https://csp.withgoogle.com/docs/strict-csp.html">Strict CSP</a>, and that define
      a Strict<em>er</em> CSP that avoids <code>'strict-dynamic'</code>.
    </p>
      
    <canvas id="csp_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests:
          <a href="https://wpt.fyi/results/content-security-policy?label=master&label=experimental&aligned"><code>/content-security-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">96.34%</td>
              
              <td class="passes-all">96.11%</td>
              
              <td class="passes-most">77.70%</td>
              
              <td class="passes-many">59.57%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <article>
    <h2 id="trusted-types">
      <a href="#trusted-types">§</a>
      Trusted Types
    </h2>
    <p>
      <a href="https://github.com/w3c/webappsec-trusted-types/">Trusted Types</a> give developers
      the ability to avoid the risks of dumping raw strings into DOM methods and setters that can
      cause script execution.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use Trusted Types in either enforcing
      or reporting mode, and of those, which enforce Trusted Types.
    </p>
      
    <canvas id="tt_usage"></canvas>

    <canvas id="tt_creation"></canvas>
    <section>
        <h3>
          Web Platform Tests: 
          <a href="https://wpt.fyi/results/trusted-types?label=master&label=experimental&aligned"><code>/trusted-types</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">99.87%</td>
              
              <td class="passes-all">99.73%</td>
              
              <td class="passes-few">16.41%</td>
              
              <td class="passes-few">16.67%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <article>
    <h2 id="isolation">
      <a href="#isolation">§</a>
      Isolation
    </h2>
    <p>
      <code>Cross-Origin-Opener-Policy</code> and <code>Cross-Origin-Embedder-Policy</code> help
      developers mitigate the risk of <a href="https://meltdownattack.com/">Spectre</a> and similar
      attacks.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use COOP and COEP, and those that
      have opted into cross-origin isolation by using both.
    </p>
      
    <canvas id="coop_coep_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests:<br><br>
          CORP:
          <a href="https://wpt.fyi/results/fetch/cross-origin-resource-policy?label=master&label=experimental&aligned"><code>/fetch/cross-origin-resource-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">99.19%</td>
              
              <td class="passes-all">99.19%</td>
              
              <td class="passes-all">99.19%</td>
              
              <td class="passes-all">98.04%</td>
              
            </tr>
          </tbody>
       </table>
        <h3>
          COEP: <a href="https://wpt.fyi/results/html/cross-origin-embedder-policy?label=master&label=experimental&aligned"><code>/html/cross-origin-embedder-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">96.11%</td>
              
              <td class="passes-all">95.51%</td>
              
              <td class="passes-most">82.04%</td>
              
              <td class="passes-many">57.78%</td>
              
            </tr>
          </tbody>
       </table>
        <h3>
          COOP:<a href="https://wpt.fyi/results/html/cross-origin-opener-policy?label=master&label=experimental&aligned"><code>/html/cross-origin-opener-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">97.52%</td>
              
              <td class="passes-most">81.23%</td>
              
              <td class="passes-many">74.91%</td>
              
              <td class="passes-few">9.96%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <!-- SRI -->
  <article>
    <h2 id="sri">
      <a href="#sri">§</a>
      Subresource Integrity
    </h2>
    <p>
      Developers can ensure that they load only the script and style resources they intend to load,
      mitigating the risk that an untrusted server could replace it maliciously, by adding
      <code>integrity</code> attributes to elements as defined in
      <a href="https://www.w3.org/TR/SRI/">Subresource Integrity</a>. This, especially
      <a href="https://w3c.github.io/webappsec-csp/#external-hash">in combination with CSP</a> is
      a powerful tool, which we'd like to encourage folks to use.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use SRI successfully, and those that
      have resources which fail an SRI check.
    </p>
      
    <canvas id="sri_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests:
          <a href="https://wpt.fyi/results/subresource_integrity/?label=master&label=experimental&aligned"><code>/subresource_integrity</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">100.00%</td>
              
              <td class="passes-all">100.00%</td>
              
              <td class="passes-all">100.00%</td>
              
              <td class="passes-all">100.00%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <!-- Sandbox -->
  <article>
    <h2 id="sandbox">
      <a href="#sandbox">§</a>
      Sandboxing
    </h2>
    <p>
      Documents can be placed into a sandbox, giving them an opaque origin, and limiting their
      ability to take certain actions, like navigating the top-level document, execute script,
      submit forms, and so on. This can be done either via the 
      <a href="https://html.spec.whatwg.org/multipage/iframe-embed-object.html#attr-iframe-sandbox"><code>sandbox</code> IFrame attribute</a>
      or via the <a href="https://w3c.github.io/webappsec-csp/#directive-sandbox"><code>sandbox</code> CSP directive</a>.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      representing the percentage of Chrome page loads that sandbox a document via either IFrame
      attributes, or CSP directives.
    </p>
      
    <canvas id="sandbox_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests:
          <a href="https://wpt.fyi/results/?label=master&label=experimental&aligned&q=sandbox"><code>?"sandbox"</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">97.25%</td>
              
              <td class="passes-all">95.78%</td>
              
              <td class="passes-many">51.74%</td>
              
              <td class="passes-some">42.54%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <article>
    <h2 id="fetch-metadata">
      <a href="#fetch-metadata">§</a>
      Fetch Metadata
    </h2>
    <p>
      The information provided in the HTTP request headers defined by
      <a href="https://w3c.github.io/webappsec-fetch-metadata/">Fetch Metadata</a>
      can give servers the ability to defend themselves from side-channel attacks by making
      better decisions about which requests to respond to, and which to reject <em>a priori</em>.
      We believe that a
      <a href="https://web.dev/fetch-metadata/#how-to-use-fetch-metadata-to-protect-against-cross-origin-attacks">Resource Isolation Policy</a>
      is a robust approach to some common cross-site vulnerabilities, and we encourage its implementation.
    </p>

    <section>
        <h3>
          Web Platform Tests:
          <a href="https://wpt.fyi/results/fetch/metadata?label=master&label=experimental&aligned"><code>/fetch/metadata</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">98.41%</td>
              
              <td class="passes-all">99.70%</td>
              
              <td class="passes-all">96.51%</td>
              
              <td class="passes-some">43.02%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js" integrity="sha256-R4pqcOYV8lt7snxMQO/HSbVCFRPMdrhAFMH+vr9giYI=" crossorigin="anonymous" nonce="not-really-a-nonce"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@0.5.7/chartjs-plugin-annotation.min.js" integrity="sha256-Olnajf3o9kfkFGloISwP1TslJiWUDd7IYmfC+GdCKd4=" crossorigin="anonymous" nonce="not-really-a-nonce"></script>
  <script nonce="not-really-a-nonce">
    const colors = { red: "#e41a1c", blue: "#377eb8", green: "#4daf4a", orange: "#ff7f00", purple: "#984ea3" };
    const use_counter_days = ["2020-09-18", "2020-09-19", "2020-09-20", "2020-09-21", "2020-09-22", "2020-09-23", "2020-09-24", "2020-09-25", "2020-09-26", "2020-09-27", "2020-09-28", "2020-09-29", "2020-09-30", "2020-10-01", "2020-10-02", "2020-10-03", "2020-10-04", "2020-10-05", "2020-10-06", "2020-10-07", "2020-10-08", "2020-10-09", "2020-10-10", "2020-10-11", "2020-10-12", "2020-10-13", "2020-10-14", "2020-10-15", "2020-10-16", "2020-10-17", "2020-10-18", "2020-10-19", "2020-10-20", "2020-10-21", "2020-10-22", "2020-10-23", "2020-10-24", "2020-10-25", "2020-10-26", "2020-10-27", "2020-10-28", "2020-10-29", "2020-10-30", "2020-10-31", "2020-11-01", "2020-11-02", "2020-11-03", "2020-11-04", "2020-11-05", "2020-11-06", "2020-11-07", "2020-11-08", "2020-11-09", "2020-11-10", "2020-11-11", "2020-11-12", "2020-11-13", "2020-11-14", "2020-11-15", "2020-11-16", "2020-11-17", "2020-11-18", "2020-11-19", "2020-11-20", "2020-11-21", "2020-11-22", "2020-11-23", "2020-11-24", "2020-11-25", "2020-11-26", "2020-11-27", "2020-11-28", "2020-11-29", "2020-11-30", "2020-12-01", "2020-12-02", "2020-12-03", "2020-12-04", "2020-12-05", "2020-12-06", "2020-12-07", "2020-12-08", "2020-12-09", "2020-12-10", "2020-12-11", "2020-12-12", "2020-12-13", "2020-12-14", "2020-12-15", "2020-12-16"];
    const use_counter_buckets = {"15": [0, 35.07015, 0, 0, 0, 0, 0, 0, 35.14578, 0, 0, 0, 0, 0, 38.51668, 0, 35.9267, 38.46459, 38.60352, 38.6132, 0, 38.45586, 35.4157, 36.10754, 38.50633, 39.63698, 40.12876, 36.33479, 36.23688, 35.04266, 35.46189, 36.38178, 37.00208, 37.35242, 37.62108, 37.59957, 35.39392, 35.93225, 37.85242, 37.97344, 38.07809, 38.27739, 38.00666, 35.41084, 35.72434, 38.08154, 38.1223, 39.04988, 38.90653, 38.72116, 36.20042, 36.23582, 38.44253, 38.55868, 37.86941, 38.58075, 38.51679, 36.08568, 36.81703, 38.58592, 38.64364, 0, 39.07807, 39.17634, 36.04394, 36.44197, 38.81466, 38.65591, 0, 0, 36.39212, 35.80754, 36.31793, 39.65097, 39.88277, 39.79318, 40.12232, 39.77727, 35.85532, 36.33465, 0, 40.32775, 37.41273, 37.83837, 37.69379, 35.577, 35.83825, 0, 0, 37.61589], "540": [0, 4.73464, 0, 0, 0, 0, 0, 0, 9.54132, 0, 0, 0, 0, 0, 8.87054, 0, 9.50336, 8.75209, 8.75271, 8.74874, 0, 8.636, 9.4646, 9.33137, 8.56461, 8.21189, 9.42295, 9.37889, 9.54067, 9.99497, 9.8566, 9.46983, 9.3247, 9.23681, 9.15771, 9.29651, 10.01337, 9.88283, 9.15686, 9.11713, 9.12493, 9.07782, 9.19603, 9.90479, 9.85922, 9.08991, 9.13988, 8.90512, 8.93521, 9.10235, 9.93514, 9.78492, 8.98237, 8.77409, 9.01149, 8.29892, 8.47136, 9.17778, 9.4327, 8.40342, 8.32185, 8.35208, 8.19213, 8.32788, 9.22848, 9.11315, 8.50596, 8.58254, 0, 0, 9.98512, 9.58875, 9.39897, 8.58571, 8.17949, 8.11785, 8.05651, 8.14042, 9.19298, 8.99627, 0, 8.12008, 8.79279, 8.68154, 8.74454, 9.23888, 9.10825, 0, 0, 8.64486], "541": [0, 0.01424, 0, 0, 0, 0, 0, 0, 0.01354, 0, 0, 0, 0, 0, 0.01271, 0, 0.01369, 0.01228, 0.01295, 0.01272, 0, 0.01263, 0.01351, 0.01285, 0.012, 0.0126, 0.01446, 0.01519, 0.01521, 0.01669, 0.01606, 0.01506, 0.01595, 0.01581, 0.01601, 0.01624, 0.01695, 0.01681, 0.01632, 0.01455, 0.0143, 0.01389, 0.01416, 0.01557, 0.01489, 0.01433, 0.01523, 0.01378, 0.01269, 0.01299, 0.01424, 0.01434, 0.01363, 0.01294, 0.01376, 0.01258, 0.01264, 0.01377, 0.01349, 0.01293, 0.01301, 0.01321, 0.0133, 0.0138, 0.01578, 0.01548, 0.0141, 0.01457, 0, 0, 0.01532, 0.01527, 0.0149, 0.01284, 0.0127, 0.01278, 0.01264, 0.01305, 0.01578, 0.01598, 0, 0.01887, 0.01892, 0.01904, 0.01762, 0.01691, 0.01789, 0, 0, 0.01621], "672": [0, 19.39038, 0, 0, 0, 0, 0, 0, 19.32695, 0, 0, 0, 0, 0, 17.81435, 0, 19.45825, 17.36205, 17.36338, 17.50554, 0, 17.49966, 19.38605, 19.13657, 17.31019, 17.50506, 17.59545, 17.2698, 17.8107, 19.62249, 19.49485, 17.66301, 17.67023, 17.64503, 17.65622, 18.05834, 19.84634, 19.64336, 17.65047, 17.60833, 17.73156, 17.79874, 18.10373, 19.83854, 19.571, 17.81621, 18.039, 17.93928, 17.97713, 18.61916, 20.3871, 19.95544, 17.91732, 17.95695, 18.30176, 18.09083, 18.41425, 20.46052, 20.42753, 18.12524, 17.93675, 0, 18.04289, 18.36811, 20.62402, 20.39882, 18.4422, 18.53658, 0, 0, 20.25489, 21.00099, 20.75579, 18.36481, 18.27305, 18.42812, 18.31402, 18.71795, 20.98429, 20.7845, 0, 19.10574, 17.34431, 17.63488, 18.31224, 20.30058, 0, 0, 0, 18.26411], "673": [0, 0.18795, 0, 0, 0, 0, 0, 0, 0.18477, 0, 0, 0, 0, 0, 0.18518, 0, 0.20476, 0.19407, 0.19791, 0.19023, 0, 0.17794, 0.18915, 0.21824, 0.19736, 0.17295, 0.20151, 0.20232, 0.19412, 0.17152, 0.18687, 0.19654, 0.20085, 0.19182, 0.18422, 0.17966, 0.17064, 0.19091, 0.18595, 0.19096, 0.18896, 0.18512, 0.18002, 0.17436, 0.19206, 0.18931, 0.22314, 0.22809, 0.20806, 0.19681, 0.19285, 0.19847, 0.19528, 0.19267, 0.19148, 0.18214, 0.1825, 0.18376, 0.1947, 0.19068, 0.18796, 0, 0.18044, 0.17466, 0.17729, 0.19548, 0.18711, 0.18497, 0, 0, 0.17316, 0.17368, 0.19158, 0.17492, 0.17402, 0.1726, 0.1726, 0.17191, 0.1766, 0.19482, 0, 0.21368, 0.2112, 0.20088, 0.18929, 0.17997, 0, 0, 0, 0.19316], "2722": [0, 0.8052, 0, 0, 0, 0, 0, 0, 0.81605, 0, 0, 0, 0, 0, 1.93794, 0, 1.07215, 2.14245, 2.12538, 2.11943, 0, 2.02285, 0.88644, 1.18231, 2.20971, 2.58116, 2.62216, 2.69972, 2.61963, 0.7333, 0.92665, 1.56661, 1.69804, 1.77163, 1.81913, 1.68052, 0.77767, 1.00011, 1.92095, 1.93962, 1.91585, 1.95015, 1.7372, 0.77545, 1.04866, 1.94473, 1.80276, 1.93523, 2.01619, 1.83275, 0.83829, 1.1223, 2.10977, 2.09513, 1.87119, 2.104, 1.90339, 0.85897, 1.11643, 2.15901, 2.15583, 2.13536, 2.214, 2.05961, 0.85774, 1.09349, 2.10301, 2.00303, 0, 0, 1.06417, 0.7849, 1.08633, 2.2674, 2.33373, 2.29461, 2.35258, 2.12362, 0.85378, 1.11077, 0, 2.24113, 2.12269, 2.13034, 1.91817, 1.02497, 1.23455, 0, 0, 2.04255], "2723": [0, 48.77156, 0, 0, 0, 0, 0, 0, 48.843, 0, 0, 0, 0, 0, 47.96601, 0, 49.32903, 47.31722, 47.46344, 48.74864, 0, 52.42571, 54.32562, 54.30923, 51.90334, 51.82329, 51.55367, 51.50143, 52.30393, 54.9685, 54.78727, 52.19976, 52.73901, 52.85643, 53.07339, 53.69949, 55.84306, 55.671, 53.18438, 53.27419, 53.4633, 53.67929, 54.08991, 55.87108, 55.81258, 53.84842, 54.65788, 54.97284, 54.53247, 54.90064, 56.73941, 56.28602, 53.99502, 54.12186, 54.63007, 53.91179, 54.17414, 56.16342, 56.11009, 53.7223, 53.67719, 53.78418, 53.91389, 54.37039, 56.19881, 56.1379, 54.62645, 54.78447, 0, 0, 56.60885, 56.81165, 56.68934, 54.50847, 54.3351, 54.4561, 54.54322, 55.12935, 56.51881, 56.55622, 0, 55.01537, 53.30778, 53.60317, 54.26142, 56.52432, 56.11038, 0, 0, 53.84098], "2724": [0, 0.05948, 0, 0, 0, 0, 0, 0, 0.05891, 0, 0, 0, 0, 0, 0.0459, 0, 0.05392, 0.04246, 0.04334, 0.04392, 0, 0.04598, 0.05947, 0.0527, 0.04222, 0.04196, 0.04619, 0.04819, 0.04416, 0.0545, 0.05146, 0.04355, 0.04332, 0.04298, 0.04315, 0.04602, 0.05669, 0.0535, 0.04281, 0.04288, 0.04363, 0.04578, 0.04874, 0.06146, 0.05551, 0.04492, 0.04494, 0.04324, 0.04372, 0.04741, 0.06062, 0.05468, 0.04356, 0.04398, 0.0469, 0.04384, 0.04686, 0.05981, 0.05434, 0.04387, 0.04411, 0.04493, 0.04474, 0.04938, 0.0646, 0.05942, 0.04939, 0.05046, 0, 0, 0.05558, 0.0644, 0.05948, 0.04571, 0.04699, 0.04785, 0.04854, 0.05181, 0.06939, 0.06369, 0, 0.0551, 0.05929, 0.0397, 0.04571, 0.05919, 0.05556, 0, 0, 0.04732], "3132": [0, 11.28043, 0, 0, 0, 0, 0, 0, 11.37365, 0, 0, 0, 0, 0, 15.29443, 0, 12.32894, 15.72568, 15.84447, 15.82322, 0, 15.65407, 11.70934, 12.85899, 15.97682, 17.51671, 17.64755, 18.21488, 13.07656, 11.25478, 11.89089, 13.51822, 14.14842, 14.5371, 14.77015, 14.39883, 11.47854, 12.2171, 15.04374, 15.18156, 15.13322, 15.27098, 14.66066, 11.32145, 12.18305, 15.02991, 15.03901, 15.76956, 15.71001, 15.1038, 11.74923, 12.61456, 15.72095, 15.72338, 14.96843, 15.82393, 15.23371, 11.79959, 12.55631, 15.7089, 15.87738, 0, 16.23587, 15.87718, 11.70601, 12.55585, 15.72522, 15.52983, 0, 0, 12.41375, 11.4178, 12.34961, 16.48204, 16.77835, 16.72293, 16.9807, 16.39622, 11.53022, 12.4267, 0, 16.62641, 14.86853, 14.98715, 14.38934, 11.53734, 0, 0, 0, 14.53219], "3137": [0, 6.4338, 0, 0, 0, 0, 0, 0, 6.50866, 0, 0, 0, 0, 0, 9.81841, 0, 7.30338, 10.29949, 10.39438, 10.3904, 0, 10.18168, 6.82861, 7.84394, 10.65094, 11.92549, 11.94823, 12.36766, 12.30575, 6.28708, 6.87197, 8.41565, 8.96264, 9.29223, 9.50598, 9.09023, 6.51565, 7.19182, 9.74985, 9.88875, 9.83798, 9.97687, 9.36181, 6.42604, 7.21479, 9.79424, 9.88427, 10.61356, 10.45372, 9.77615, 6.8268, 7.59491, 10.3595, 10.3601, 9.61522, 10.41267, 9.8248, 6.79511, 7.5093, 10.38222, 10.52152, 0, 10.81127, 10.36658, 6.68823, 7.441, 10.33426, 10.14964, 0, 0, 7.25028, 6.4269, 7.25542, 10.98929, 11.26699, 11.19254, 11.43474, 10.77482, 6.55421, 7.34571, 0, 10.96161, 9.76263, 9.80426, 9.15109, 6.58773, 0, 0, 0, 9.35511], "3160": [0, 0.80419, 0, 0, 0, 0, 0, 0, 0.81499, 0, 0, 0, 0, 0, 1.93392, 0, 1.07078, 2.13768, 2.12039, 2.1146, 0, 2.01842, 0.88527, 1.18058, 2.20413, 2.57564, 2.61666, 2.69499, 2.61605, 0.73232, 0.92513, 1.56147, 1.69239, 1.7661, 1.81372, 1.67607, 0.77658, 0.99844, 1.9157, 1.93399, 1.91024, 1.94447, 1.73278, 0.77434, 1.0469, 1.93923, 1.79757, 1.91471, 1.98931, 1.81121, 0.83285, 1.11379, 2.07403, 2.04964, 1.82856, 2.07654, 1.87973, 0.85188, 1.10668, 2.13238, 2.12963, 0, 2.17348, 2.01683, 0.84679, 1.07823, 2.06133, 1.96536, 0, 0, 1.04798, 0.77643, 1.0733, 2.23001, 2.29688, 2.26432, 2.32422, 2.1006, 0.84735, 1.10174, 0, 2.21527, 2.0515, 2.0693, 1.87147, 1.01219, 0, 0, 0, 1.9899], "3161": [0, 0.00129, 0, 0, 0, 0, 0, 0, 0.00138, 0, 0, 0, 0, 0, 0.00529, 0, 0.00181, 0.00632, 0.00637, 0.00639, 0, 0.0058, 0.00148, 0.0023, 0.00752, 0.0072, 0.00728, 0.00659, 0.00594, 0.00128, 0.00204, 0.00691, 0.00759, 0.00727, 0.00718, 0.00599, 0.00141, 0.00222, 0.00703, 0.00749, 0.00734, 0.00752, 0.00584, 0.0014, 0.00227, 0.00721, 0.00679, 0.0262, 0.03501, 0.02838, 0.00686, 0.01097, 0.04414, 0.0526, 0.05109, 0.03494, 0.03057, 0.00844, 0.01209, 0.0349, 0.03418, 0, 0.0596, 0.07288, 0.01645, 0.0236, 0.07139, 0.06339, 0, 0, 0.02472, 0.02349, 0.04087, 0.06401, 0.12862, 0.14726, 0.15258, 0.12916, 0.03539, 0.05474, 0, 0.14108, 0.12122, 0.1019, 0.07878, 0.0189, 0, 0, 0, 0.08973], "3197": [0, 0.20856, 0, 0, 0, 0, 0, 0, 0.21054, 0, 0, 0, 0, 0, 0.20938, 0, 0.2135, 0.31783, 0.41264, 0.41806, 0, 0.45623, 0.62867, 0.53829, 0.42408, 0.6484, 0.66659, 0.57511, 0.39335, 0.43315, 0.40968, 0.36161, 0.35633, 0.35226, 0.35788, 0.3673, 0.42531, 0.40362, 0.34442, 0.34469, 0.34885, 0.34925, 0.3619, 0.42114, 0.39308, 0.34449, 0.3935, 0.41253, 0.38794, 0.39978, 0.50304, 0.42235, 0.34783, 0.34095, 0.35922, 0.34205, 0.35691, 0.41934, 0.38878, 0.33558, 0.33575, 0, 0.33879, 0.34339, 0.3882, 0.37155, 0.31763, 0.32244, 0, 0, 0.33933, 0.37524, 0.3559, 0.28939, 0.30135, 0.29994, 0.30163, 0.31156, 0.38654, 0.37403, 0, 0.30248, 0.29899, 0.16962, 0.17147, 0.19373, 0, 0, 0, 0.16158], "3198": [0, 0.0, 0, 0, 0, 0, 0, 0, 0.0008, 0, 0, 0, 0, 0, 0.0, 0, 0.0, 0.0029, 0.0014, 0.0014, 0, 0.0003, 0.0006, 0.0019, 0.0017, 0.0026, 0.0015, 0, 0.0097, 0.0012, 0.0, 1e-05, 1e-05, 1e-05, 1e-05, 2e-05, 0.0, 0.0, 0.07424, 0.24072, 0.25081, 0.25485, 0.31002, 0.39015, 0.3335, 0.24533, 0.2436, 0.22739, 0.23824, 0.29495, 0.41105, 0.32107, 0.23147, 0.24508, 0.25639, 0.24153, 0.31839, 0.46859, 0.34055, 0.25045, 0.24763, 0.2448, 0.24569, 0.28546, 0.37783, 0.30962, 0.24503, 0.25819, 0, 0, 0.31701, 0.38182, 0.3026, 0.22075, 0.2228, 0.21806, 0.22041, 0.2717, 0.37169, 0.30493, 0, 0.30573, 0.30578, 0.2841, 0.33167, 0.42389, 0, 0, 0, 0.33475], "3199": [0, 0.00127, 0, 0, 0, 0, 0, 0, 0.00125, 0, 0, 0, 0, 0, 0.001, 0, 0.00111, 0.05713, 0.13996, 0.1379, 0, 0.13668, 0.15898, 0.15573, 0.13612, 0.12354, 0.14921, 0.1543, 0.15641, 0.16574, 0.1654, 0.1509, 0.14676, 0.14541, 0.1426, 0.14502, 0.16493, 0.16393, 0.14172, 0.14169, 0.14506, 0.143, 0.14821, 0.16668, 0.16808, 0.15185, 0.15311, 0.13547, 0.13178, 0.13459, 0.16338, 0.17127, 0.14609, 0.17919, 0.1793, 0.14748, 0.13896, 0.16444, 0.15861, 0.12468, 0.12167, 0, 0.12631, 0.1271, 0.15943, 0.15571, 0.132, 0.13675, 0, 0, 0.18434, 0.17622, 0.16721, 0.13803, 0.12035, 0.11579, 0.12734, 0.12554, 0.16156, 0.15625, 0, 0.13852, 0.13526, 0.13879, 0.14031, 0.16135, 0.15558, 0, 0, 0.14694], "3200": [0, 0.001, 0, 0, 0, 0, 0, 0, 0.00098, 0, 0, 0, 0, 0, 0.00081, 0, 0.00087, 0.00076, 0.00078, 0.00075, 0, 0.00082, 0.00095, 0.00088, 0.00075, 0.001, 0.00106, 0.00111, 0.00118, 0.00127, 0.00109, 0.00095, 0.00095, 0.001, 0.00104, 0.00116, 0.00133, 0.00116, 0.0011, 0.00111, 0.00111, 0.00118, 0.0012, 0.00139, 0.00123, 0.00109, 0.00113, 0.00103, 0.00121, 0.00126, 0.00156, 0.00133, 0.00112, 0.00119, 0.00121, 0.00119, 0.00129, 0.00165, 0.00144, 0.0012, 0.00122, 0.00126, 0.00126, 0.00134, 0.00163, 0.00153, 0.00129, 0.00131, 0, 0, 0.00143, 0.00164, 0.00151, 0.0012, 0.00123, 0.00127, 0.00135, 0.00138, 0.00173, 0.0015, 0, 0.00149, 0.00143, 0.00135, 0.00149, 0.00171, 0.00147, 0, 0, 0.00136]}

    // Vertical lines for Chrome milestones:
    const milestones = { 'M87': '2020-11-17', 'M86': '2020-10-06' };
    const annotations = Object.entries(milestones).map(([m, date]) => {
      return {
        id: m,
        type: 'line',
        mode: 'vertical',
        scaleID: 'x-axis-0',
        value: use_counter_days.find(v => v == date),
        borderColor: colors["orange"],
        borderWidth: 1,
        label: {
          backgroundColor: colors["orange"],
          content: m,
          enabled: true,
          position: "bottom",
          yAdjust: 5
        }
      };
    });

    // Configure chart options:
    const chart_options = {
      scales: {
        yAxes: [
          {
            ticks: {
              beginAtZero: true,
              callback: (v) => { return v + '%'; }
            },
            scaleLabel: {
              display: true,
              labelString: 'Percentage of Page Views'
            }
          }
        ]
      },
      annotation: { annotations: annotations }
    };

    // Configure charts:
    const charts = [{
        id: "csp_usage",
        data: [{
            label: "All CSP",
            color: "red",
            useCounter: 15
          }, {
            label: "Strict CSP",
            color: "blue",
            useCounter: 3132
          }, {
            label: "Stricter CSP",
            color: "green",
            useCounter: 3137
          }]
      }, {
        id: "tt_usage",
        data: [{
            label: "Trusted Types",
            color: "red",
            useCounter: 2722
          }, {
            label: "Report-Only",
            color: "blue",
            useCounter: 3161
          }, {
            label: "Enforced",
            color: "green",
            useCounter: 3160
          }]
      }, {
        id: "tt_creation",
        data: [{
            label: "Policy Creation",
            color: "red",
            useCounter: 2723
          }]
      }, {
        id: "sri_usage",
        data: [{
            label: "SRI Blocked Resource",
            color: "red",
            useCounter: 541
          }, {
            label: "SRI Validated Resource",
            color: "green",
            useCounter: 540
          }]
      }, {
        id: "sandbox_usage",
        data: [{
            label: "Sandbox via IFrame",
            color: "blue",
            useCounter: 672
          }, {
            label: "Sandbox via CSP",
            color: "green",
            useCounter: 673
          }]
      }, {
        id: "coop_coep_usage",
        data: [{
            label: "COOP: same-origin",
            color: "blue",
            useCounter: 3197
          }, {
            label: "COOP: same-origin-allow-popups",
            color: "green",
            useCounter: 3198
          }, {
            label: "COEP: require-corp",
            color: "red",
            useCounter: 3199
          }, {
            label: "Cross-Origin Isolated",
            color: "purple",
            useCounter: 3200
          }]
      }
    ];

    charts.forEach(c => {
      new Chart(c.id, {
        type: "line",
        options: chart_options,
        data: {
          labels: use_counter_days,
          datasets: c.data.map(d => {
            return {
              label: d.label,
              borderColor: colors[d.color],
              data: use_counter_buckets[d.useCounter + ""]
            };
          })
        }
      });
    });
  </script>
  <footer>
    Something you'd like to see? <a href="https://github.com/mikewest/mitigation-supply">File an issue!</a> &mdash; Updated on 2020-12-18.
  </footer>
</body>
</html>
