<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Web Mitigation Metrics</title>

<link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;800&family=Roboto+Slab:wght@100;500&display=swap" rel="stylesheet">
<style>
  body, html {
    border: 0;
    margin: 0;
    padding: 0;
  }
  h1 {
    background: black;
    color: white;
    font: 100 40px/1.2 'Roboto Slab', sans-serif;
    margin: 0 0 40px 0;
    padding: 40px;
    text-align: right;
  }
  article {
    max-width: 750px;
    margin: 0 auto;
  }
  h2 {
    font: 800 24px/1.2 'Open Sans', sans-serif;
  }
  p, ul {
    font: 18px/1.2 'Open Sans', sans-serif;
  }
  li {
    margin: 0 0 20px 20px;
  }
  section {
    max-width:750px;
    margin: 1em auto;
    background: #111;
  }

  h3 {
    color: #FFF;
    font-family: 'Roboto Slab', 'Sans Serif';
    font-weight: 100;
    font-size: 22px;
    margin: 0;
    padding: 0.5em;
  }
    h3 a {
      color: #FFF;  
    }

  table {
    width: 100%;
    text-align: center;
  }
  th {
    font-family: 'Roboto Slab';
    color: #FFF;
    font-size: 
  }
  td {
    font-family: 'Roboto Slab', 'Sans Serif';
    font-weight: 500;
    font-size: 40px;
    color: #FFF;
  }
    td.passes-few  { color: #e57373; }
    td.passes-some { color: #ffb74d; }
    td.passes-many { color: #dce775; }
    td.passes-most { color: #aed581; }
    td.passes-all  { color: #81c784; }

  footer {
    background: black;
    color: white;
    margin: 1em 0 0 0;
    padding: 1ch 2ch;
    font: 15px/1.4 'Open Sans', sans-serif;
    text-align: right;
  }
    footer a, footer a:visited {
      font-family: monospace;
      color: #52cbff;
    }
</style>
</head>
<body>
  <h1>Web Mitigation Metrics</h1>
  <article>
    <h2>Content Security Policy</h2>
    <p>
      We believe that a carefully-crafted
      <a href="https://w3c.github.io/webappsec-csp/">Content Security Policy</a>
      can help protect web applications from injection attacks that would otherwise lead to script
      execution. <a href="https://csp.withgoogle.com/docs/strict-csp.html">Strict CSP</a> is a
      reasonable approach, one which we'd like to encourage.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use CSP at all, that define a
      <a href="https://csp.withgoogle.com/docs/strict-csp.html">Strict CSP</a>, and that define
      a Strict<em>er</em> CSP that avoids <code>'strict-dynamic'</code>.
    </p>
      
    <canvas id="csp_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests:
          <a href="https://wpt.fyi/results/content-security-policy?label=master&label=experimental&aligned"><code>/content-security-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">95.62%</td>
              
              <td class="passes-most">93.35%</td>
              
              <td class="passes-most">78.01%</td>
              
              <td class="passes-many">60.11%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <article>
    <h2>Trusted Types</h2>
    <p>
      <a href="https://github.com/w3c/webappsec-trusted-types/">Trusted Types</a> give developers
      the ability to avoid the risks of dumping raw strings into DOM methods and setters that can
      cause script execution.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use Trusted Types in either enforcing
      or reporting mode, and of those, which enforce Trusted Types.
    </p>
      
    <canvas id="tt_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests: 
          <a href="https://wpt.fyi/results/trusted-types?label=master&label=experimental&aligned"><code>/trusted-types</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">99.28%</td>
              
              <td class="passes-few">20.45%</td>
              
              <td class="passes-few">17.54%</td>
              
              <td class="passes-few">17.84%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <article>
    <h2>Isolation</h2>
    <p>
      <code>Cross-Origin-Opener-Policy</code> and <code>Cross-Origin-Embedder-Policy</code> help
      developers mitigate the risk of <a href="https://meltdownattack.com/">Spectre</a> and similar
      attacks.
    </p>
    <p>
      The data below is gathered from
      <a href="https://chromestatus.com/metrics/feature/popularity">Chrome's usage statistics</a>,
      and represents the percentage of Chrome page loads that use COOP and COEP, and those that
      have opted into cross-origin isolation by using both.
    </p>
      
    <canvas id="coop_coep_usage"></canvas>

    <section>
        <h3>
          Web Platform Tests:<br><br>
          CORP:
          <a href="https://wpt.fyi/results/fetch/cross-origin-resource-policy?label=master&label=experimental&aligned"><code>/fetch/cross-origin-resource-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">100.00%</td>
              
              <td class="passes-all">100.00%</td>
              
              <td class="passes-all">100.00%</td>
              
              <td class="passes-all">98.04%</td>
              
            </tr>
          </tbody>
        </table>
        <h3>
          COEP: <a href="https://wpt.fyi/results/html/cross-origin-embedder-policy?label=master&label=experimental&aligned"><code>/html/cross-origin-embedder-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-most">94.27%</td>
              
              <td class="passes-most">85.30%</td>
              
              <td class="passes-most">82.80%</td>
              
              <td class="passes-many">61.29%</td>
              
            </tr>
          </tbody>
       </table>
        <h3>
          COOP:<a href="https://wpt.fyi/results/html/cross-origin-opener-policy?label=master&label=experimental&aligned"><code>/html/cross-origin-opener-policy</code></a>
        </h3>
        <table>
          <thead>
            <tr>
              
              <th>Chrome</th>
              
              <th>Edge</th>
              
              <th>Firefox</th>
              
              <th>Safari</th>
              
            </tr>
          </thead>
          <tbody>
            <tr>
              
              <td class="passes-all">98.24%</td>
              
              <td class="passes-all">97.95%</td>
              
              <td class="passes-all">97.95%</td>
              
              <td class="passes-few">11.71%</td>
              
            </tr>
          </tbody>
       </table>
    </section>
  </article>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js" integrity="sha256-R4pqcOYV8lt7snxMQO/HSbVCFRPMdrhAFMH+vr9giYI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@0.5.7/chartjs-plugin-annotation.min.js" integrity="sha256-Olnajf3o9kfkFGloISwP1TslJiWUDd7IYmfC+GdCKd4=" crossorigin="anonymous"></script>
  <script>
    const colors = { red: "#e41a1c", blue: "#377eb8", green: "#4daf4a", orange: "#ff7f00", purple: "#984ea3" };
    const use_counter_days = ["2020-03-12", "2020-03-13", "2020-03-14", "2020-03-15", "2020-03-16", "2020-03-17", "2020-03-18", "2020-03-19", "2020-03-20", "2020-03-21", "2020-03-22", "2020-03-23", "2020-03-24", "2020-03-25", "2020-03-26", "2020-03-27", "2020-03-28", "2020-03-29", "2020-03-30", "2020-03-31", "2020-04-01", "2020-04-02", "2020-04-03", "2020-04-04", "2020-04-05", "2020-04-06", "2020-04-07", "2020-04-08", "2020-04-09", "2020-04-11", "2020-04-12", "2020-04-13", "2020-04-17", "2020-04-18", "2020-04-21", "2020-04-24", "2020-04-25", "2020-04-26", "2020-04-27", "2020-04-29", "2020-04-30", "2020-05-01", "2020-05-02", "2020-05-03", "2020-05-04", "2020-05-05", "2020-05-06", "2020-05-07", "2020-05-09", "2020-05-10", "2020-05-11", "2020-05-12", "2020-05-13", "2020-05-14", "2020-05-15", "2020-05-16", "2020-05-17", "2020-05-20", "2020-05-21", "2020-05-23"];
    const use_counter_buckets = {"15": [16.698334, 16.762639, 16.522637, 16.733923, 17.09846, 17.370471000000002, 17.58313, 17.665995000000002, 17.781346, 17.020618000000002, 17.144029, 17.971616, 18.017865999999998, 17.957493, 18.018174000000002, 17.966613000000002, 17.02075, 17.21661, 18.242528999999998, 18.236333, 18.342211, 18.366204, 18.159301, 17.002102, 17.273736, 18.34342, 18.108155, 18.026654, 17.998723, 17.045867, 17.205852, 18.104385, 18.337813999999998, 34.523563, 36.066245, 36.113285, 35.015229, 35.058704, 36.218005, 36.458838, 36.598222, 36.580937000000006, 35.231257, 35.566586, 36.738164, 36.55315, 36.616082, 36.618086, 35.033976, 35.258569, 36.478967000000004, 36.447179, 36.451029, 36.441845, 36.068017000000005, 34.795066000000006, 35.082653, 36.358074, 36.308816, 34.985726], "2722": [0.32628599999999996, 0.285581, 0.115718, 0.16440000000000002, 0.324589, 0.31701199999999996, 0.32615299999999997, 0.30539099999999997, 0.26888900000000004, 0.101924, 0.13267299999999999, 0.292294, 0.284176, 0.276413, 0.293692, 0.253654, 0.092529, 0.1275, 0.277132, 0.272434, 0.270436, 0.264889, 0.24104899999999999, 0.093189, 0.12557200000000002, 0.27706, 0.27306600000000003, 0.269425, 0.254888, 0.082861, 0.11383199999999999, 0.23341299999999998, 0.23953999999999998, 0.092614, 0.293457, 0.24289200000000002, 0.08203200000000001, 0.12467299999999999, 0.308664, 0.346135, 0.33259700000000003, 0.270471, 0.103913, 0.14141399999999998, 0.342009, 0.346071, 0.359261, 0.391881, 0.133656, 0.191299, 0.42571299999999995, 0.446006, 0.46521599999999996, 0.471128, 0.426994, 0.157998, 0.227726, 0.514545, 0.49039699999999997, 0.166869], "3132": [12.0209, 11.2527, 10.1119, 10.6083, 11.779100000000001, 12.1074, 12.2876, 12.2709, 11.9261, 10.6042, 11.0468, 12.7497, 12.8445, 12.894900000000002, 12.8935, 12.549, 10.7293, 11.3153, 13.3991, 13.1992, 13.0945, 13.1523, 12.523500000000002, 10.3933, 11.190999999999999, 13.0526, 16.4949, 18.3741, 16.5431, 12.4109, 12.3047, 14.2974, 11.985930999999999, 10.47147, 12.86717, 13.133066, 11.152899, 11.698874, 13.803528000000002, 13.879863, 13.847472999999999, 13.050035, 11.335966, 11.99903, 14.139864999999999, 14.065536000000002, 14.157068, 14.173926, 11.46105, 11.957828, 14.248832, 14.160295000000001, 14.15035, 14.081256999999999, 13.440545, 11.397487, 12.057373, 14.013402, 13.856328000000001, 11.135707], "3137": [7.881399999999999, 7.225099999999999, 6.1112, 6.561599999999999, 7.6511, 7.8842, 8.055900000000001, 8.0319, 7.6612, 6.4902, 6.9036, 8.4187, 8.4533, 8.4778, 8.4993, 8.174299999999999, 6.6716, 7.1303, 8.8773, 8.7045, 8.654100000000001, 8.7035, 8.1137, 6.396399999999999, 7.009, 8.5454, 11.504100000000001, 13.0242, 11.5033, 7.761899999999999, 7.8445, 9.5285, 7.399782000000001, 6.082591, 8.245884, 8.493916, 6.745806, 7.259097000000001, 9.064277, 9.165065, 9.127578, 8.365010999999999, 6.884435, 7.47157, 9.361214, 9.273156, 9.323951, 9.365515, 7.015569000000001, 7.437170999999999, 9.418493999999999, 9.324485000000001, 9.332361, 9.287665, 8.700657, 6.908129000000001, 7.4806289999999995, 9.161432999999999, 9.020003, 6.599876], "3160": [0.0, 0, 0, 0, 0, 0.0, 0.0, 0, 9.999999999999999e-05, 0.0, 0, 0, 0.0, 0.0, 0.0023, 0.0007, 0.0005, 0.0007, 0.00030000000000000003, 0.00039999999999999996, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.00030000000000000003, 0.00030000000000000003, 9.999999999999999e-05, 0.0006000000000000001, 0.00039999999999999996, 9.999999999999999e-05, 0.00019999999999999998, 0.0, 0.0006000000000000001, 0.00039999999999999996, 9.999999999999999e-05, 9.999999999999999e-05, 0.0007, 0.0014, 0.0015, 0.0007, 0.00030000000000000003, 9.999999999999999e-05, 0.00019999999999999998, 0.00019999999999999998, 9.999999999999999e-05, 0.00030000000000000003, 0.0005, 0.00019999999999999998, 0.0005, 0.0005, 0.00019999999999999998, 0.00019999999999999998, 0.00039999999999999996, 0.00030000000000000003, 0.00039999999999999996, 0.00019999999999999998, 0.00019999999999999998, 9.999999999999999e-05], "3161": [0.05159999999999999, 0.0443, 0.0111, 0.017, 0.051500000000000004, 0.0556, 0.053200000000000004, 0.054, 0.0449, 0.0097, 0.014100000000000001, 0.053799999999999994, 0.053899999999999997, 0.0523, 0.053700000000000005, 0.0655, 0.0072, 0.012799999999999999, 0.0546, 0.06269999999999999, 0.0635, 0.058699999999999995, 0.0446, 0.006600000000000001, 0.0139, 0.055900000000000005, 0.046700000000000005, 0.0465, 0.0439, 0.0075, 0.0112, 0.041, 0.026400000000000003, 0.0056, 0.0452, 0.048799999999999996, 0.009600000000000001, 0.025099999999999997, 0.0779, 0.08059999999999999, 0.0794, 0.0667, 0.0144, 0.0321, 0.1152, 0.1112, 0.1112, 0.1147, 0.0161, 0.0344, 0.1307, 0.1263, 0.1242, 0.1251, 0.1065, 0.0169, 0.039, 0.0721, 0.050100000000000006, 0.0089], "3197": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00019999999999999998, 0.0007, 0.0017, 0.0015999999999999999, 0.0014, 0.0015999999999999999, 0.0014, 0.0036999999999999997, 0.0015, 0.0046, 0.0042, 0.0029, 0.0026, 0.0031000000000000003, 0.0036999999999999997, 0.0021, 0.0017, 0.0023, 0.0026, 0.0028, 0.0058, 0.0078, 0.006, 0.0069, 0.006600000000000001, 0.0073999999999999995, 0.007600000000000001, 0.0083, 0.0055000000000000005, 0.0059, 0.0067, 0.006200000000000001, 0.0057], "3198": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0, 0.0, 0], "3199": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00019999999999999998, 0.0005, 0.0015, 0.0015999999999999999, 0.0009, 0.0013, 0.0012000000000000001, 0.0019000000000000002, 0.001, 0.0044, 0.0023, 0.0013, 0.0009, 0.0014, 0.0014, 0.0017, 0.0015, 0.001, 0.001, 0.0011, 0.0011, 0.0014, 0.001, 0.0007999999999999999, 0.0011, 0.0007999999999999999, 0.0011, 0.0012000000000000001, 0.0011, 0.0013, 0.0011, 0.001, 0.0017], "3200": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.00019999999999999998, 0.0005, 0.0015, 0.0015999999999999999, 0.0009, 0.0012000000000000001, 0.0012000000000000001, 0.0012000000000000001, 0.0009, 0.0044, 0.0022, 0.0012000000000000001, 0.0007, 0.0012000000000000001, 0.0012000000000000001, 0.0015999999999999999, 0.0014, 0.0009, 0.0009, 0.001, 0.0009, 0.0012000000000000001, 0.0009, 0.0007, 0.0009, 0.0007, 0.0009, 0.001, 0.0009, 0.0009, 0.0009, 0.0009, 0.0014]}
    const chart_options = {
      scales: {
        yAxes: [
          {
            ticks: {
              beginAtZero: true,
              callback: (v) => { return v + '%'; }
            },
            scaleLabel: {
              display: true,
              labelString: 'Percentage of Page Views'
            }
          }
        ]
      },
      annotation: {
        annotations: [{
          id: 'm81',
          type: 'line',
          mode: 'vertical',
          scaleID: 'x-axis-0',
          value: use_counter_days.find(v => v == "2020-04-07"),
          borderColor: colors["orange"],
          borderWidth: 1,
          label: {
            backgroundColor: colors["orange"],
            content: 'M81',
            enabled: true,
            position: "bottom",
            yAdjust: 5
          }
        }, {
          id: 'm83',
          type: 'line',
          mode: 'vertical',
          scaleID: 'x-axis-0',
          value: use_counter_days.find(v => v == "2020-05-20"),
          borderColor: colors["orange"],
          borderWidth: 1,
          label: {
            backgroundColor: colors["orange"],
            content: 'M83',
            enabled: true,
            position: "bottom",
            yAdjust: 5
          }
        }]
      }
    };

    let csp_chart = new Chart(document.querySelector('#csp_usage').getContext('2d'), {
      type: "line",
      data: {
        labels: use_counter_days,
        datasets: [
          {
            label: "All CSP",
            borderColor: colors["red"],
            data: use_counter_buckets["15"]
          },
          {
            label: "Reasonable CSP",
            borderColor: colors["blue"],
            data: use_counter_buckets["3132"]
          },
          {
            label: "Better than Reasonable CSP",
            borderColor: colors["green"],
            data: use_counter_buckets["3137"]
          }
        ]
      },
      options: chart_options
    });

    let tt_chart = new Chart(document.querySelector('#tt_usage').getContext('2d'), {
      type: "line",
      data: {
        labels: use_counter_days,
        datasets: [
          {
            label: "Trusted Types",
            borderColor: colors["red"],
            data: use_counter_buckets["2722"]
          },
          {
            label: "Report-Only",
            borderColor: colors["blue"],
            data: use_counter_buckets["3161"]
          },
          {
            label: "Enforced",
            borderColor: colors["green"],
            data: use_counter_buckets["3160"]
          }
        ]
      },
      options: chart_options
    });

    let coop_coep_chart = new Chart(document.querySelector('#coop_coep_usage').getContext('2d'), {
      type: "line",
      data: {
        labels: use_counter_days,
        datasets: [
          {
            label: "COOP: same-origin",
            borderColor: colors["red"],
            data: use_counter_buckets["3197"]
          },
          {
            label: "COEP: require-corp",
            borderColor: colors["blue"],
            data: use_counter_buckets["3199"]
          },
          {
            label: "Cross-Origin Isolated",
            borderColor: colors["green"],
            data: use_counter_buckets["3200"]
          }
        ]
      },
      options: chart_options
    });
  </script>
  <footer>
    Updated on 2020-05-25.
  </footer>
</body>
</html>
